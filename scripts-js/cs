#! /usr/bin/env node
// Generated by CoffeeScript 1.10.0
(function() {
  var EXECUTABLES_DIR, INPUTS, OPTIM, aux, e, err, error, error1, error2, error3, error4, forward, i, index, input, len, program, ref, ref1;

  e = require('child_process').execSync;

  ref = require('./common'), EXECUTABLES_DIR = ref.EXECUTABLES_DIR, INPUTS = ref.INPUTS, OPTIM = ref.OPTIM;

  process.argv = process.argv.slice(2);

  input = INPUTS[0];

  index = 0;

  if (process.argv[0] != null) {
    if (process.argv[0] === 'a') {
      input = 'a';
      process.argv = process.argv.slice(1);
    } else if ((ref1 = process.argv[0]) === '0' || ref1 === '1' || ref1 === '2' || ref1 === '3') {
      index = Number(process.argv[0]);
      input = INPUTS[process.argv[0]];
      process.argv = process.argv.slice(1);
    }
  }

  try {
    e("./compile check", {
      stdio: 'inherit'
    });
  } catch (error) {
    err = error;
    process.exit(1);
  }

  program = (process.argv[0] != null) && process.argv[0][0] !== '-' ? (aux = process.argv[0], process.argv = process.argv.slice(1), aux) : "ftdock";

  forward = process.argv.join(" ");

  process.chdir(EXECUTABLES_DIR);

  if (input === 'a') {
    for (index = i = 0, len = INPUTS.length; i < len; index = ++i) {
      input = INPUTS[index];
      try {
        e(OPTIM + " check -c ../scripts/checker " + program + ".3 -a :" + input + " --against ../outputs/test" + (index + 1) + ".output  " + forward, {
          stdio: 'inherit'
        });
      } catch (error1) {
        err = error1;
      }
      try {
        e(OPTIM + " speedup -H -I " + program + ".3 -a :" + input + " " + forward, {
          stdio: 'inherit'
        });
      } catch (error2) {
        err = error2;
      }
    }
  } else {
    try {
      e(OPTIM + " check -c ../scripts/checker " + program + ".3 -a :" + input + " --against ../outputs/test" + (index + 1) + ".output  " + forward, {
        stdio: 'inherit'
      });
    } catch (error3) {
      err = error3;
    }
    try {
      e(OPTIM + " speedup -H -I " + program + ".3 -a :" + input + " " + forward, {
        stdio: 'inherit'
      });
    } catch (error4) {
      err = error4;
    }
  }

}).call(this);
